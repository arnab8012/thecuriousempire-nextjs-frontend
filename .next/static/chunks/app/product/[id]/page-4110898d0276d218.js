(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[0],{63:(t,e,n)=>{"use strict";var r=n(7260);n.o(r,"useParams")&&n.d(e,{useParams:function(){return r.useParams}}),n.o(r,"usePathname")&&n.d(e,{usePathname:function(){return r.usePathname}}),n.o(r,"useRouter")&&n.d(e,{useRouter:function(){return r.useRouter}}),n.o(r,"useSearchParams")&&n.d(e,{useSearchParams:function(){return r.useSearchParams}})},1935:(t,e,n)=>{Promise.resolve().then(n.bind(n,6687))},4842:(t,e,n)=>{"use strict";n.d(e,{Z:()=>o});var r=n(63);function o(){let t=(0,r.useRouter)();return function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r="string"==typeof e?e:String(e);(null==n?void 0:n.replace)?t.replace(r):t.push(r)}}},4975:(t,e,n)=>{"use strict";n.d(e,{F:()=>i});let r=String("https://ecom-backend-rql0.onrender.com").replace(/\/$/,"");async function o(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{let n=await fetch(t,{...e,credentials:"include"}),r=await n.text(),o={};try{o=r?JSON.parse(r):{}}catch(t){o={ok:!1,message:r||"Non-JSON response"}}return n.ok||!o||"object"!=typeof o||"status"in o||(o.status=n.status),o}catch(t){return{ok:!1,message:(null==t?void 0:t.message)||"Network error"}}}let i={BASE:r,get:t=>o("".concat(r).concat(t),{method:"GET"}),getAuth:(t,e)=>o("".concat(r).concat(t),{method:"GET",headers:e?{Authorization:"Bearer ".concat(e)}:{}}),post:(t,e,n)=>o("".concat(r).concat(t),{method:"POST",headers:{"Content-Type":"application/json",...n?{Authorization:"Bearer ".concat(n)}:{}},body:JSON.stringify(e||{})}),postForm:(t,e,n)=>o("".concat(r).concat(t),{method:"POST",headers:{...n?{Authorization:"Bearer ".concat(n)}:{}},body:e}),postAuth:(t,e,n)=>o("".concat(r).concat(t),{method:"POST",headers:{"Content-Type":"application/json",...e?{Authorization:"Bearer ".concat(e)}:{}},body:JSON.stringify(n||{})}),put:(t,e,n)=>o("".concat(r).concat(t),{method:"PUT",headers:{"Content-Type":"application/json",...n?{Authorization:"Bearer ".concat(n)}:{}},body:JSON.stringify(e||{})}),putAuth:(t,e,n)=>o("".concat(r).concat(t),{method:"PUT",headers:{"Content-Type":"application/json",...e?{Authorization:"Bearer ".concat(e)}:{}},body:JSON.stringify(n||{})}),delete:(t,e)=>o("".concat(r).concat(t),{method:"DELETE",headers:e?{Authorization:"Bearer ".concat(e)}:{}}),token:function(){return localStorage.getItem("token")||""},adminToken:function(){return localStorage.getItem("admin_token")||""}}},5167:(t,e,n)=>{"use strict";n.d(e,{_:()=>d,e:()=>u});var r=n(5155),o=n(2115);let i=(0,o.createContext)(null),a="cart_items_v1",l="buy_now_item_v1";function s(){try{let t=JSON.parse(localStorage.getItem("cart_items_v1")||"[]");return Array.isArray(t)?t:[]}catch(t){return[]}}function c(t){localStorage.setItem(a,JSON.stringify(t))}function u(t){let{children:e}=t,[n,u]=(0,o.useState)(s),[d,m]=(0,o.useState)(()=>{try{return JSON.parse(localStorage.getItem(l)||"null")}catch(t){return null}}),p=(0,o.useMemo)(()=>n.reduce((t,e)=>t+(e.qty||0),0),[n]);return(0,r.jsx)(i.Provider,{value:{items:n,add:t=>{u(e=>{let n,r=e.findIndex(e=>e.productId===t.productId&&String(e.variant||"")===String(t.variant||""));return c(n=r>=0?e.map((e,n)=>n===r?{...e,qty:Number(e.qty||0)+Number(t.qty||0)}:e):[...e,{...t,qty:Number(t.qty||1)}]),n})},inc:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";u(n=>{let r=n.map(n=>String(n.productId)!==String(t)||String(n.variant||"")!==String(e||"")?n:{...n,qty:Number(n.qty||0)+1});return c(r),r})},dec:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";u(n=>{let r=n.map(n=>String(n.productId)!==String(t)||String(n.variant||"")!==String(e||"")?n:{...n,qty:Math.max(1,Number(n.qty||0)-1)});return c(r),r})},remove:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";u(n=>{let r=n.filter(n=>String(n.productId)!==String(t)||String(n.variant||"")!==String(e||""));return c(r),r})},clear:()=>{u([]),localStorage.removeItem(a)},cartCount:p,buyNow:function(t){var e;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o={productId:t._id,title:t.title,price:t.price,image:(null==(e=t.images)?void 0:e[0])||t.image||"https://via.placeholder.com/300",variant:n,qty:r};m(o),localStorage.setItem(l,JSON.stringify(o))},checkoutItem:d,clearBuyNow:()=>{m(null),localStorage.removeItem(l)}},children:e})}function d(){return(0,o.useContext)(i)||{items:[],add:()=>{},inc:()=>{},dec:()=>{},remove:()=>{},clear:()=>{},cartCount:0,buyNow:()=>{},checkoutItem:null,clearBuyNow:()=>{},useUserCart:()=>{}}}},6687:(t,e,n)=>{"use strict";n.d(e,{default:()=>u});var r=n(5155),o=n(2115),i=n(63),a=n(4842),l=n(4975),s=n(5167),c=n(2664);function u(){var t,e,n,u,d,m,p,h,g;let{id:y}=function(){let t=(0,i.useParams)()||{},e={};for(let n of Object.keys(t)){let r=t[n];e[n]=Array.isArray(r)?r[0]:r}return e}(),v=(0,a.Z)(),{add:f,buyNow:b}=(0,s._)(),[x,j]=(0,o.useState)(null),[S,N]=(0,o.useState)(""),[k,w]=(0,o.useState)(1),[_,C]=(0,o.useState)(0),[O,I]=(0,o.useState)("");(0,o.useEffect)(()=>{let t=!0;return(async()=>{let e=await l.F.get("/api/products/".concat(y));if(t)if(e.ok){var n,r,o;j(e.product),N((null==(o=e.product)||null==(r=o.variants)||null==(n=r[0])?void 0:n.name)||""),w(1),C(0)}else alert(e.message||"Not found")})(),()=>t=!1},[y]);let P=(0,o.useMemo)(()=>(Array.isArray(null==x?void 0:x.images)?x.images:[]).filter(Boolean),[null==x?void 0:x.images]);if((0,o.useEffect)(()=>{if(P.length<=1)return;let t=setInterval(()=>{C(t=>(t+1)%P.length)},2500);return()=>clearInterval(t)},[P.length]),!x)return(0,r.jsx)("div",{className:"container",children:"Loading..."});let T=P[_]||"https://via.placeholder.com/800x500?text=Product",A={productId:x._id,title:x.title,image:P[0]||T,variant:S,qty:k,price:x.price},B=t=>{I(t),window.__pd_toast_t&&window.clearTimeout(window.__pd_toast_t),window.__pd_toast_t=window.setTimeout(()=>I(""),1200)},q=(null==x?void 0:x._id)?"https://thecuriousempire.com/product/".concat(x._id):"https://thecuriousempire.com/product/".concat(y),E=(null==x?void 0:x.title)?"".concat(x.title," | The Curious Empire"):"Product | The Curious Empire",R=String((null==x?void 0:x.description)||"Shop premium products at The Curious Empire. Quality products with fast delivery.").replace(/\s+/g," ").trim().slice(0,180),J=P[0]||"https://thecuriousempire.com/og.png",z=((null==x?void 0:x.variants)||[]).find(t=>t.name===S),F=(null!=(p=null!=(m=null==z?void 0:z.stock)?m:null==x||null==(e=x.variants)||null==(t=e[0])?void 0:t.stock)?p:0)>0,D=null!=(g=null!=(h=null==z?void 0:z.stock)?h:null==x||null==(u=x.variants)||null==(n=u[0])?void 0:n.stock)?g:0,M=D>0&&k<=D,U=Number((null==x?void 0:x.price)||0),G=(null==x?void 0:x._id)?{"@context":"https://schema.org","@type":"Product",name:x.title,image:((null==P?void 0:P.length)?P:[J]).filter(Boolean),description:R,sku:String(x._id),brand:{"@type":"Brand",name:"The Curious Empire"},offers:{"@type":"Offer",url:q,priceCurrency:"BDT",price:U||void 0,availability:F?"https://schema.org/InStock":"https://schema.org/OutOfStock",itemCondition:"https://schema.org/NewCondition"}}:null;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(c.mg,{children:[(0,r.jsx)("title",{children:E}),(0,r.jsx)("meta",{name:"description",content:R}),(0,r.jsx)("link",{rel:"canonical",href:q}),(0,r.jsx)("meta",{property:"og:title",content:E}),(0,r.jsx)("meta",{property:"og:description",content:R}),(0,r.jsx)("meta",{property:"og:type",content:"product"}),(0,r.jsx)("meta",{property:"og:url",content:q}),(0,r.jsx)("meta",{property:"og:image",content:J}),(0,r.jsx)("meta",{name:"twitter:card",content:"summary_large_image"}),(0,r.jsx)("meta",{name:"twitter:title",content:E}),(0,r.jsx)("meta",{name:"twitter:description",content:R}),(0,r.jsx)("meta",{name:"twitter:image",content:J}),G&&(0,r.jsx)("script",{type:"application/ld+json",children:JSON.stringify(G)})]}),(0,r.jsx)("div",{className:"container",children:(0,r.jsxs)("div",{className:"pd",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{style:{position:"relative"},children:[(0,r.jsx)("img",{className:"pdImg",src:T,alt:x.title,style:{width:"100%",borderRadius:14}}),P.length>1&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("button",{type:"button",onClick:()=>{P.length&&C(t=>(t-1+P.length)%P.length)},style:{position:"absolute",left:10,top:"50%",transform:"translateY(-50%)",width:40,height:40,borderRadius:999,border:"none",cursor:"pointer",background:"rgba(0,0,0,0.45)",color:"#fff",fontSize:20},"aria-label":"Previous image",children:"‹"}),(0,r.jsx)("button",{type:"button",onClick:()=>{P.length&&C(t=>(t+1)%P.length)},style:{position:"absolute",right:10,top:"50%",transform:"translateY(-50%)",width:40,height:40,borderRadius:999,border:"none",cursor:"pointer",background:"rgba(0,0,0,0.45)",color:"#fff",fontSize:20},"aria-label":"Next image",children:"›"})]}),P.length>1&&(0,r.jsx)("div",{style:{position:"absolute",left:0,right:0,bottom:10,display:"flex",justifyContent:"center",gap:8},children:P.map((t,e)=>(0,r.jsx)("button",{type:"button",onClick:()=>C(e),style:{width:10,height:10,borderRadius:999,border:"none",cursor:"pointer",background:e===_?"#111":"rgba(0,0,0,0.25)"},"aria-label":"img-".concat(e)},e))})]}),P.length>1&&(0,r.jsx)("div",{style:{display:"flex",gap:10,marginTop:12,overflowX:"auto",paddingBottom:6},children:P.map((t,e)=>(0,r.jsx)("button",{type:"button",onClick:()=>C(e),style:{border:e===_?"2px solid #ff007a":"1px solid #eee",borderRadius:12,padding:2,background:"#fff",cursor:"pointer",flex:"0 0 auto"},title:"Image ".concat(e+1),"aria-label":"Thumbnail ".concat(e+1),children:(0,r.jsx)("img",{src:t,alt:"",width:"78",height:"60",style:{objectFit:"cover",borderRadius:10}})},e))})]}),(0,r.jsxs)("div",{className:"pdRight",style:{position:"relative"},children:[O?(0,r.jsxs)("div",{style:{position:"sticky",top:8,zIndex:20,background:"rgba(0,0,0,0.78)",color:"#fff",padding:"10px 14px",borderRadius:12,width:"fit-content",fontWeight:800,marginBottom:10},children:["✓ ",O]}):null,(0,r.jsx)("h2",{children:x.title}),(0,r.jsxs)("div",{className:"priceRow",children:[(0,r.jsxs)("span",{className:"price",children:["৳ ",x.price]}),x.compareAtPrice?(0,r.jsxs)("span",{className:"cut",children:["৳ ",x.compareAtPrice]}):null]}),(0,r.jsxs)("div",{className:"muted",children:["Delivery time: ",x.deliveryDays]}),(null==(d=x.variants)?void 0:d.length)?(0,r.jsxs)("div",{className:"box",children:[(0,r.jsx)("div",{className:"lbl",children:"Available variant:"}),(0,r.jsx)("select",{value:S,onChange:t=>N(t.target.value),className:"input",children:x.variants.map((t,e)=>(0,r.jsxs)("option",{value:t.name,children:[t.name," (Stock: ",t.stock,")"]},e))})]}):null,(0,r.jsxs)("div",{className:"box",children:[(0,r.jsx)("div",{className:"lbl",children:"Quantity"}),(0,r.jsxs)("div",{className:"qtyRow",children:[(0,r.jsx)("button",{className:"qtyBtn",onClick:()=>w(t=>Math.max(1,t-1)),type:"button","aria-label":"Decrease quantity",children:"−"}),(0,r.jsx)("input",{className:"qtyInput",value:k,onChange:t=>{let e=Math.max(1,Number(t.target.value||1));if(D>0&&e>D){w(D),B("Only ".concat(D," in stock"));return}w(e)},inputMode:"numeric",type:"number",min:"1"}),(0,r.jsx)("button",{className:"qtyBtn",onClick:()=>w(t=>{let e=t+1;return D>0&&e>D?(B("Only ".concat(D," in stock")),t):e}),type:"button","aria-label":"Increase quantity",children:"+"})]})]}),(0,r.jsxs)("div",{className:"pdBtns",children:[(0,r.jsx)("button",{className:"btnPinkFull",onClick:()=>{if(!M)return void B(D<=0?"Stock Out":"Only ".concat(D," in stock"));f(A),B("Added to cart")},type:"button",disabled:!M,children:"Add to Cart"}),(0,r.jsx)("button",{className:"btnDarkFull",onClick:()=>{if(!M)return void B(D<=0?"Stock Out":"Only ".concat(D," in stock"));b(x,S,k),v("/checkout?mode=buy")},type:"button",disabled:!M,children:"Buy Now"}),D<=0?(0,r.jsx)("div",{style:{marginTop:10,fontWeight:900,color:"#b91c1c"},children:"Stock Out"}):null]}),(0,r.jsxs)("div",{className:"box",children:[(0,r.jsx)("h4",{children:"Description"}),(0,r.jsx)("p",{className:"product-description muted",children:x.description||"No description yet."})]})]})]})})]})}}},t=>{t.O(0,[664,441,493,358],()=>t(t.s=1935)),_N_E=t.O()}]);