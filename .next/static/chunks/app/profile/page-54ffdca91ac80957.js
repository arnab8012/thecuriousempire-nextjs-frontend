(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[636],{1789:(e,t,r)=>{"use strict";r.d(t,{default:()=>o});var s=r(5155),l=r(6848),i=r(1834),a=r(4901),n=r(4975);function o(e){let{children:t}=e,{user:r,booting:o}=(0,a.A)();return((0,i.z)(),o)?(0,s.jsx)("div",{className:"softBox",children:"Loading..."}):n.F.token()&&r?t:(0,s.jsx)(l.A,{to:"/login",replace:!0})}},1834:(e,t,r)=>{"use strict";r.d(t,{z:()=>l});var s=r(63);function l(){let e=(0,s.usePathname)()||"/",t=(0,s.useSearchParams)();return{pathname:e,search:(null==t?void 0:t.toString())?"?".concat(t.toString()):""}}},4842:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var s=r(63);function l(){let e=(0,s.useRouter)();return function(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s="string"==typeof t?t:String(t);(null==r?void 0:r.replace)?e.replace(s):e.push(s)}}},6223:(e,t,r)=>{"use strict";r.d(t,{default:()=>u});var s=r(5155),l=r(2115),i=r(9109),a=r(4842),n=r(4901),o=r(4975),d=r(9954);let c=[{key:"PLACED",label:"Placed"},{key:"CONFIRMED",label:"To Ship"},{key:"DELIVERED",label:"To Received"},{key:"CANCELLED",label:"Cancelled"},{key:"ALL",label:"All Orders"}];function m(e){return"৳ ".concat(Math.round(Number(e)||0).toLocaleString("en-US"))}function u(){(0,d.A)("noindex, nofollow");let{user:e,logout:t}=(0,n.A)(),r=(0,a.Z)(),u=(0,l.useMemo)(()=>localStorage.getItem("token"),[]),[h,p]=(0,l.useState)("PLACED"),[v,x]=(0,l.useState)([]),[N,f]=(0,l.useState)(!0);return(0,l.useEffect)(()=>{let e=!0;return(async()=>{try{f(!0);let t="ALL"===h?"/api/orders/my":"/api/orders/my?status=".concat(encodeURIComponent(h)),r=await o.F.getAuth(t,u);if(!e)return;(null==r?void 0:r.ok)?x(Array.isArray(r.orders)?r.orders:[]):x([])}catch(t){e&&x([])}finally{e&&f(!1)}})(),()=>{e=!1}},[h,u]),(0,s.jsxs)("div",{className:"container profilePage",children:[(0,s.jsxs)("div",{className:"profileTop premiumCard profileTopPremium",children:[(0,s.jsxs)("div",{className:"profileWho",children:[(0,s.jsx)("div",{className:"profileName",children:(null==e?void 0:e.fullName)||""}),(0,s.jsx)("div",{className:"profilePhone",children:(null==e?void 0:e.phone)||""})]}),(0,s.jsxs)("div",{className:"profileActions profileActionsPremium",children:[(0,s.jsx)(i.A,{className:"btnGhost profileBtn",to:"/settings",children:"⚙ Settings"}),(0,s.jsx)("button",{className:"btnGhost profileBtn",type:"button",onClick:()=>{window.confirm("Are you sure you want to logout?")&&(t(),r("/login"))},children:"Logout"})]})]}),(0,s.jsx)("div",{className:"profileTitleRowPremium",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"profileH",children:"My Orders"}),(0,s.jsx)("div",{className:"muted",children:"Filter by status"})]})}),(0,s.jsx)("div",{className:"tabsRowPremium",role:"tablist","aria-label":"Order status filters",children:c.map(e=>(0,s.jsx)("button",{className:h===e.key?"chipPremium active":"chipPremium",onClick:()=>p(e.key),type:"button",role:"tab","aria-selected":h===e.key,children:e.label},e.key))}),N?(0,s.jsxs)("div",{className:"box premiumCard profileEmptyCard",children:[(0,s.jsx)("div",{className:"emptyIcon",children:"⏳"}),(0,s.jsx)("div",{className:"emptyTitle",children:"Loading orders..."}),(0,s.jsx)("div",{className:"emptyHint",children:"Please wait a moment."})]}):0===v.length?(0,s.jsxs)("div",{className:"box premiumCard profileEmptyCard",children:[(0,s.jsx)("div",{className:"emptyIcon",children:"\uD83E\uDDFE"}),(0,s.jsx)("div",{className:"emptyTitle",children:"No orders found"}),(0,s.jsx)("div",{className:"emptyHint",children:"Try another status or start shopping."}),(0,s.jsx)(i.A,{className:"btnPrimary emptyBtn",to:"/shop",children:"Shop Now"})]}):v.map(e=>{var t;let r=e.createdAt?new Date(e.createdAt).toLocaleString():"—",l=e.orderNo||e._id;return(0,s.jsxs)("div",{className:"box premiumCard orderCardPremium",children:[(0,s.jsxs)("div",{className:"orderTopRowPremium",children:[(0,s.jsxs)("div",{className:"orderId",children:["Order ID: ",(0,s.jsx)("b",{children:l})]}),(0,s.jsx)("div",{className:"orderDate muted",children:r})]}),(0,s.jsxs)("div",{className:"orderStatusRowPremium",children:[(0,s.jsx)("span",{className:"muted",children:"Status"}),(0,s.jsx)("span",{className:function(e){let t=String(e||"").toUpperCase();return"DELIVERED"===t?"statusPill delivered":"CONFIRMED"===t?"statusPill confirmed":"CANCELLED"===t?"statusPill cancelled":"PLACED"===t?"statusPill placed":"statusPill"}(e.status),children:String(e.status||"—")})]}),(0,s.jsx)("div",{className:"orderItemsPremium",children:(e.items||[]).map((e,t)=>{var r;let l=(null==e?void 0:e.image)||(null==e||null==(r=e.images)?void 0:r[0])||(null==e?void 0:e.thumb)||"https://via.placeholder.com/120x90?text=Product",i=(null==e?void 0:e.title)||"No title",a=(null==e?void 0:e.variant)||"",n=Number((null==e?void 0:e.qty)||0),o=Number((null==e?void 0:e.price)||0);return(0,s.jsxs)("div",{className:"orderItemRowPremium",children:[(0,s.jsx)("div",{className:"orderItemThumb",children:(0,s.jsx)("img",{src:l,alt:i,loading:"lazy",onError:e=>{e.currentTarget.src="https://via.placeholder.com/120x90?text=Product"}})}),(0,s.jsxs)("div",{className:"orderItemInfo",children:[(0,s.jsx)("div",{className:"orderItemTitle",children:i}),a?(0,s.jsx)("div",{className:"orderItemVariant muted",children:a}):null,(0,s.jsx)("div",{className:"orderItemMeta",children:(0,s.jsxs)("span",{className:"muted",children:["x",n," — ",m(o*n)]})})]})]},t)})}),(0,s.jsxs)("div",{className:"orderTotalRowPremium",children:[(0,s.jsx)("b",{children:"Total"}),(0,s.jsx)("b",{children:m(null!=(t=e.total)?t:0)})]})]},e._id)}),(0,s.jsx)("div",{className:"center profileBottomCta",children:(0,s.jsx)(i.A,{className:"btnPrimary",to:"/",children:"Continue Shopping"})})]})}},6848:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var s=r(2115),l=r(63);function i(e){let{to:t="/",replace:r=!1}=e,i=(0,l.useRouter)();return(0,s.useEffect)(()=>{r?i.replace(t):i.push(t)},[t,r,i]),null}},9109:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var s=r(5155),l=r(2619),i=r.n(l);function a(e){var t;let{to:r,href:l,...a}=e;return(0,s.jsx)(i(),{href:null!=(t=null!=l?l:r)?t:"#",...a})}},9495:(e,t,r)=>{Promise.resolve().then(r.bind(r,1789)),Promise.resolve().then(r.bind(r,6223))},9954:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});var s=r(2115);function l(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"noindex, nofollow";(0,s.useEffect)(()=>{let t=document.querySelector('meta[name="robots"]'),r=(null==t?void 0:t.getAttribute("content"))||null;return t||((t=document.createElement("meta")).setAttribute("name","robots"),document.head.appendChild(t)),t.setAttribute("content",e),()=>{let e=document.querySelector('meta[name="robots"]');e&&(r?e.setAttribute("content",r):e.remove())}},[])}}},e=>{e.O(0,[176,901,441,493,358],()=>e(e.s=9495)),_N_E=e.O()}]);